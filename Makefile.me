NODE=$(shell which node)

# default make target
all: cfg debug

cfg:
	node-gyp configure

debug:
	node-gyp build --debug

clean:
	rm -rf build

led4:
	$(NODE) app/4xled7seg/main2.js

led4t:
	$(NODE) app/4xled7seg/cputemp.js

lcd16:
	$(NODE) app/lcd1602/main.js

oled:
	$(NODE) app/oled128x64/main.js

ofont:
	$(NODE) app/oled128x64/font.js

ofont2:
	$(NODE) app/oled128x64/font2.js

format:
	@find rpigpiopp -type f \( -name '*.cpp' -o -name '*.h' \) | xargs clang-format -i
	@find app -type f \( -name '*.ts' -o -name '*.js' \) | xargs clang-format -i
